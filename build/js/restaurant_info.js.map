{"version":3,"sources":["js/restaurant_info.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_dbhelper","restaurantDB","DBHelper","document","addEventListener","event","initMap","id","getParameterByName","fetchRestaurantById","then","restaurant","fillRestaurantHTML","self","newMap","L","map","center","latlng","lat","lng","zoom","scrollWheelZoom","tileLayer","mapboxToken","maxZoom","attribution","addTo","fillBreadcrumb","mapMarkerForRestaurant","removeMapAttributionsFromTabOrder","console","log","getElementById","innerHTML","name","address","imageURL","imageUrlForRestaurant","setAttribute","replace","image","src","alt","image_desc","fig","querySelector","figCaption","createElement","append","cuisine_type","operating_hours","fillRestaurantHoursHTML","fillReviewsHTML","reviews","querySelectorAll","forEach","link","operatingHours","hours","key","row","day","appendChild","time","container","title","noReviews","ul","review","createReviewHTML","li","className","date","rating","Number","isInteger","offscreenRating","comments","breadcrumb","url","window","location","href","results","RegExp","exec","decodeURIComponent","../lib/dbhelper.js","2","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","prototype","instance","TypeError","_classCallCheck","this","restaurants","fetch","response","json","neighborhoods","data","includes","neighborhood","push","cuisines","filter","cuisine","photograph","marker","urlForRestaurant"],"mappings":"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","file":"restaurant_info.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nvar _dbhelper = require('../lib/dbhelper.js');\n\nvar restaurantDB = new _dbhelper.DBHelper();\n\n/**\n * Initialize map as soon as the page is loaded.\n */\n/*\n * 2018-06-15\n *  - Add code for alt attributes on images. Use image_desc if available.\n *    If not, use restaruant name.\n */\n\ndocument.addEventListener('DOMContentLoaded', function (event) {\n  initMap();\n});\n\n/**\n * Initialize leaflet map\n */\nvar initMap = function initMap() {\n  var id = getParameterByName('id');\n\n  if (!id) {\n    console.log('No restaurant id in URL');\n  } else {\n    restaurantDB.fetchRestaurantById(id).then(function (restaurant) {\n      fillRestaurantHTML(restaurant);\n\n      self.newMap = L.map('map', {\n        center: [restaurant.latlng.lat, restaurant.latlng.lng],\n        zoom: 16,\n        scrollWheelZoom: false\n      });\n      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}', {\n        mapboxToken: 'pk.eyJ1Ijoic2RjcnVubmVyIiwiYSI6ImNqaWJyZXp5dTB4bWozbHM2YjZrdW43MjMifQ.EowtKHnQ02BnpcwWvnJNWA',\n        maxZoom: 18,\n        attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, ' + '<a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, ' + 'Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        id: 'mapbox.streets'\n      }).addTo(self.newMap);\n\n      fillBreadcrumb(restaurant);\n      _dbhelper.DBHelper.mapMarkerForRestaurant(restaurant, self.newMap);\n\n      // Take map attributions out of tab sequence\n      removeMapAttributionsFromTabOrder();\n    });\n  }\n};\n\n/**\n * Create restaurant HTML and add it to the webpage\n */\nvar fillRestaurantHTML = function fillRestaurantHTML(restaurant) {\n  var name = document.getElementById('restaurant-name');\n  name.innerHTML = restaurant.name;\n\n  var address = document.getElementById('restaurant-address');\n  address.innerHTML = restaurant.address;\n\n  var imageURL = _dbhelper.DBHelper.imageUrlForRestaurant(restaurant);\n\n  var imageMd = document.getElementById('restaurant-img-md');\n  imageMd.setAttribute('srcset', imageURL.replace('.jpg', '-560_md.jpg'));\n\n  var imageLg = document.getElementById('restaurant-img-lg');\n  imageLg.setAttribute('srcset', imageURL.replace('.jpg', '-800_lg.jpg'));\n\n  var image = document.getElementById('restaurant-img');\n  image.src = imageURL.replace('.jpg', '-320_sm.jpg');\n\n  // Add an alt attribute for images. Use \"image_desc\" if available, if not use\n  // restaurant name.\n  image.alt = restaurant.image_desc ? restaurant.image_desc : restaurant.name;\n\n  var fig = document.querySelector('figure');\n  var figCaption = document.createElement('figcaption');\n  figCaption.innerHTML = restaurant.image_desc ? restaurant.image_desc : restaurant.name;\n  fig.append(figCaption);\n\n  var cuisine = document.getElementById('restaurant-cuisine');\n  cuisine.innerHTML = restaurant.cuisine_type;\n\n  // fill operating hours\n  if (restaurant.operating_hours) {\n    fillRestaurantHoursHTML(restaurant.operating_hours);\n  }\n  // fill reviews\n  fillReviewsHTML(restaurant.reviews);\n};\n\n/**\n * Don't include map attributions in the tab sequence\n */\nvar removeMapAttributionsFromTabOrder = function removeMapAttributionsFromTabOrder() {\n  var linkList = document.querySelectorAll(\".leaflet-control-attribution a\");\n  linkList.forEach(function (link) {\n    link.setAttribute('tabindex', '-1');\n  });\n};\n\n/**\n * Create restaurant operating hours HTML table and add it to the webpage.\n */\nvar fillRestaurantHoursHTML = function fillRestaurantHoursHTML(operatingHours) {\n  var hours = document.getElementById('restaurant-hours');\n  for (var key in operatingHours) {\n    var row = document.createElement('tr');\n\n    var day = document.createElement('td');\n    day.innerHTML = key;\n    row.appendChild(day);\n\n    var time = document.createElement('td');\n    time.innerHTML = operatingHours[key];\n    row.appendChild(time);\n\n    hours.appendChild(row);\n  }\n};\n\n/**\n * Create all reviews HTML and add them to the webpage.\n */\nvar fillReviewsHTML = function fillReviewsHTML(reviews) {\n  var container = document.getElementById('reviews-container');\n  var title = document.createElement('h2');\n  title.innerHTML = 'Reviews';\n  container.appendChild(title);\n\n  if (!reviews) {\n    var noReviews = document.createElement('p');\n    noReviews.innerHTML = 'No reviews yet!';\n    container.appendChild(noReviews);\n    return;\n  }\n  var ul = document.getElementById('reviews-list');\n  reviews.forEach(function (review) {\n    ul.appendChild(createReviewHTML(review));\n  });\n  container.appendChild(ul);\n};\n\n/**\n * Create review HTML and add it to the webpage.\n */\nvar createReviewHTML = function createReviewHTML(review) {\n  var li = document.createElement('li');\n  var name = document.createElement('p');\n  name.innerHTML = review.name;\n  name.className = 'reviewer';\n  li.appendChild(name);\n\n  var date = document.createElement('p');\n  date.innerHTML = review.date;\n  date.className = 'review-date';\n  li.appendChild(date);\n\n  var rating = document.createElement('p');\n  if (Number.isInteger(review.rating) && 0 < review.rating && review.rating < 6) {\n    var offscreenRating = document.createElement('p');\n    offscreenRating.className = 'rating-offscreen';\n    offscreenRating.innerHTML = 'Rating: ' + review.rating + ' stars';\n    li.appendChild(offscreenRating);\n\n    rating.setAttribute('rating', review.rating);\n  } else {\n    rating.innerHTML = 'unrated';\n    rating.setAttribute('rating', 'invalid');\n  }\n  li.appendChild(rating);\n\n  var comments = document.createElement('p');\n  comments.innerHTML = review.comments;\n  comments.className = 'review-text';\n  li.appendChild(comments);\n\n  return li;\n};\n\n/**\n * Add restaurant name to the breadcrumb navigation menu\n */\nvar fillBreadcrumb = function fillBreadcrumb(restaurant) {\n  var breadcrumb = document.getElementById('breadcrumb');\n  var li = document.createElement('li');\n  li.innerHTML = restaurant.name;\n  breadcrumb.appendChild(li);\n};\n\n/**\n * Get a parameter by name from page URL.\n */\nvar getParameterByName = function getParameterByName(name, url) {\n  if (!url) url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n      results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n};\n\n},{\"../lib/dbhelper.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Common database helper functions.\r\n */\n\n/*DATABASE_URL()\r\nconst DATABASE_PORT = 1337;\r\nconst DATABASE_URL = `http://localhost:${DATABASE_PORT}/restaurants`;\r\n\r\nconst LOCAL_DB = 'restaurant-reviews';\r\nconst LOCAL_VERSION = 1;\r\n*/\n\nvar DBHelper = exports.DBHelper = function () {\n  function DBHelper() {\n    _classCallCheck(this, DBHelper);\n\n    var DATABASE_PORT = 1337;\n    var DATABASE_URL = 'http://localhost:' + DATABASE_PORT + '/restaurants';\n\n    this.url = DATABASE_URL;\n\n    this.restaurants = fetch(this.url).then(function (response) {\n      return response.json();\n    });\n\n    this.neighborhoods = this.restaurants.then(function (data) {\n      var a = [];\n      data.forEach(function (r) {\n        if (!a.includes(r.neighborhood)) a.push(r.neighborhood);\n      });\n      return a;\n    });\n\n    this.cuisines = this.restaurants.then(function (data) {\n      var a = [];\n      data.forEach(function (r) {\n        if (!a.includes(r.cuisine_type)) a.push(r.cuisine_type);\n      });\n      return a;\n    });\n  }\n\n  /**\r\n   * Fetch all restaurants.\r\n   */\n\n\n  _createClass(DBHelper, [{\n    key: 'fetchRestaurants',\n    value: function fetchRestaurants() {\n      return this.restaurants;\n    }\n\n    /**\r\n     * Fetch a restaurant by its ID.\r\n     */\n\n  }, {\n    key: 'fetchRestaurantById',\n    value: function fetchRestaurantById(id) {\n      return this.restaurants.then(function (restaurants) {\n        return restaurants.filter(function (r) {\n          return r.id == id;\n        })[0];\n      });\n    }\n\n    /**\r\n     * Fetch restaurants by a cuisine type with proper error handling.\r\n     */\n\n  }, {\n    key: 'fetchRestaurantsByCuisine',\n    value: function fetchRestaurantsByCuisine(cuisine) {\n      return this.restaurants.then(function (restaurants) {\n        return restaurants.filter(function (r) {\n          return r.cuisine_type == cuisine;\n        });\n      });\n    }\n\n    /**\r\n     * Fetch restaurants by a neighborhood with proper error handling.\r\n     */\n\n  }, {\n    key: 'fetchNeighborhoods',\n    value: function fetchNeighborhoods() {\n      return this.neighborhoods;\n    }\n\n    /**\r\n     * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\r\n     */\n\n  }, {\n    key: 'fetchRestaurantsByCuisineAndNeighborhood',\n    value: function fetchRestaurantsByCuisineAndNeighborhood(cuisine, neighborhood) {\n      return this.restaurants.then(function (restaurants) {\n        return restaurants.filter(function (r) {\n          return (cuisine == 'all' || r.cuisine_type == cuisine) && (neighborhood == 'all' || r.neighborhood == neighborhood);\n        });\n      });\n    }\n\n    /**\r\n     * Fetch all neighborhoods with proper error handling.\r\n     */\n\n  }, {\n    key: 'fetchNeighborhoods',\n    value: function fetchNeighborhoods() {\n      return this.neighborhoods;\n    }\n\n    /**\r\n     * Fetch all cuisines with proper error handling.\r\n     */\n\n  }, {\n    key: 'fetchCuisines',\n    value: function fetchCuisines() {\n      return this.cuisines;\n    }\n\n    /**\r\n     * Restaurant page URL.\r\n     */\n\n  }], [{\n    key: 'urlForRestaurant',\n    value: function urlForRestaurant(restaurant) {\n      return './restaurant.html?id=' + restaurant.id;\n    }\n\n    /**\r\n     * Restaurant image URL.\r\n     */\n\n  }, {\n    key: 'imageUrlForRestaurant',\n    value: function imageUrlForRestaurant(restaurant) {\n      return './img/' + (restaurant.photograph ? restaurant.photograph : restaurant.id) + '.jpg';\n    }\n\n    /**\r\n     * Map marker for a restaurant.\r\n     */\n\n  }, {\n    key: 'mapMarkerForRestaurant',\n    value: function mapMarkerForRestaurant(restaurant, map) {\n      // https://leafletjs.com/reference-1.3.0.html#marker\n      var marker = new L.marker([restaurant.latlng.lat, restaurant.latlng.lng], { title: restaurant.name,\n        alt: restaurant.name,\n        url: this.urlForRestaurant(restaurant)\n      });\n      marker.addTo(map);\n      return marker;\n    }\n    /* static mapMarkerForRestaurant(restaurant, map) {\r\n      const marker = new google.maps.Marker({\r\n        position: restaurant.latlng,\r\n        title: restaurant.name,\r\n        url: DBHelper.urlForRestaurant(restaurant),\r\n        map: map,\r\n        animation: google.maps.Animation.DROP}\r\n      );\r\n      return marker;\r\n    } */\n\n  }]);\n\n  return DBHelper;\n}();\n\n},{}]},{},[1]);\n"]}